<view class="app-container">
  <!-- ç›‘æ§æ’­æ”¾ç•Œé¢ -->
  <view class="monitor-container">
    <!-- ç«‹ä½“æ’­æ”¾æ¡† -->
    <view class="video-player">
      <!-- æ’­æ”¾å™¨ä¸»ä½“ -->
      <view class="player-main">
        <!-- è§†é¢‘ç”»é¢ -->
        <view class="video-screen">
          <image 
            src="{{currentFrame}}" 
            class="video-feed" 
            mode="aspectFill" 
            wx:if="{{currentFrame}}"
          />
          
          <!-- é»˜è®¤çŠ¶æ€ -->
          <view class="video-placeholder" wx:if="{{!currentFrame}}">
            <view class="placeholder-icon">ğŸ“¹</view>
            <text class="placeholder-text">è®¾å¤‡ç›‘æ§</text>
            <text class="placeholder-sub">ç‚¹å‡»å¼€å§‹è¿æ¥è®¾å¤‡</text>
          </view>
          
          <!-- æ’­æ”¾æ§åˆ¶è¦†ç›–å±‚ -->
          <view class="playback-overlay" bindtap="togglePlayback" wx:if="{{isConnected}}">
            <view class="play-button {{isPlaying ? 'paused' : 'playing'}}">
              <text class="play-icon">{{isPlaying ? 'â¸' : 'â–¶'}}</text>
            </view>
          </view>
          
          <!-- çŠ¶æ€ä¿¡æ¯è¦†ç›–å±‚ -->
          <view class="status-overlay" wx:if="{{isConnected}}">
            <view class="status-info">
              <view class="status-item">
                <text class="status-label">çŠ¶æ€:</text>
                <text class="status-value {{connectionStatus === 'æµä¼ è¾“ä¸­' ? 'success' : 'warning'}}">{{connectionStatus}}</text>
              </view>
              <view class="status-item" wx:if="{{fps > 0}}">
                <text class="status-label">FPS:</text>
                <text class="status-value">{{fps}}</text>
              </view>
              <view class="status-item">
                <text class="status-label">å¸§æ•°:</text>
                <text class="status-value">{{frameIndex}}</text>
              </view>
            </view>
          </view>
          
          <!-- é”™è¯¯ä¿¡æ¯æ˜¾ç¤º -->
          <view class="error-overlay" wx:if="{{errorMessage}}">
            <view class="error-message">
              <text class="error-icon">âš ï¸</text>
              <text class="error-text">{{errorMessage}}</text>
            </view>
          </view>
        </view>
        
        <!-- æ’­æ”¾å™¨æ§åˆ¶æ  -->
        <view class="player-controls" wx:if="{{isConnected}}">
          <view class="control-left">
            <view class="status-badge {{isConnected ? 'active' : ''}}">
              <view class="status-dot"></view>
              <text>{{isConnected ? 'LIVE' : 'OFFLINE'}}</text>
            </view>
          </view>
          
          <view class="control-center">
            <text class="time-display">å¸§ {{frameIndex}}</text>
            <text class="fps-display" wx:if="{{fps > 0}}">{{fps}} FPS</text>
          </view>
          
          <view class="control-right">
            <view class="control-btn-mini" bindtap="togglePlayback">
              <text>{{isPlaying ? 'â¸' : 'â–¶'}}</text>
            </view>
            <view class="control-btn-mini" bindtap="requestSingleFrame">
              <text>ğŸ“·</text>
            </view>
          </view>
        </view>
      </view>
      
      <!-- æ’­æ”¾å™¨é˜´å½±æ•ˆæœ -->
      <view class="player-shadow"></view>
    </view>

    <!-- æ§åˆ¶é¢æ¿ -->
    <view class="control-panel">
      <view class="panel-header">
        <text class="panel-title"></text>
        <view class="connection-status">
          <view class="status-indicator {{isConnected ? 'connected' : 'disconnected'}}"></view>
          <text class="status-text">{{connectionStatus}}</text>
        </view>
      </view>
      
      <view class="panel-buttons">
        <button class="panel-btn primary {{isConnected ? 'active' : ''}}" bindtap="toggleConnection">
          <text class="btn-icon">{{isConnected ? 'â¹' : 'â–¶'}}</text>
          <text class="btn-label">{{isConnected ? 'æ–­å¼€' : 'è¿æ¥'}}</text>
        </button>
        
        <button class="panel-btn secondary" bindtap="requestSingleFrame" wx:if="{{isConnected}}">
          <text class="btn-icon">ğŸ“·</text>
          <text class="btn-label">å•å¸§</text>
        </button>
        
        <button class="panel-btn secondary" bindtap="configureAscendDevice" wx:if="{{isConnected}}">
          <text class="btn-icon">âš™ï¸</text>
          <text class="btn-label">é…ç½®</text>
        </button>
        
        <button class="panel-btn secondary" bindtap="viewHistory">
          <text class="btn-icon">ğŸ“‹</text>
          <text class="btn-label">å†å²</text>
        </button>
      </view>
      
      <!-- è®¾å¤‡ä¿¡æ¯ -->
      <view class="device-info" wx:if="{{isConnected}}">
        <view class="info-item">
          <text class="info-label">è®¾å¤‡ç±»å‹:</text>
          <text class="info-value">å‡è…¾è®¾å¤‡</text>
        </view>
        <view class="info-item">
          <text class="info-label">è¿æ¥æ—¶é—´:</text>
          <text class="info-value">{{frameIndex > 0 ? 'å®æ—¶' : 'å¾…æœº'}}</text>
        </view>
      </view>
    </view>
  </view>
</view>